// https://github.com/orta/typescript-play/blob/old-site-integration/public/main-1.js#L871
// eslint-disable-next-line
//@ts-ignore
// eslint-disable-next-line
const com = (r, e, t) => { if (null == r) return ""; let o, s, a, h = {}, p = {}, c = "", f = "", n = "", u = 2, l = 3, i = 2, y = [], d = 0, w = 0; for (a = 0; a < r.length; a += 1)if (c = r.charAt(a), Object.prototype.hasOwnProperty.call(h, c) || (h[c] = l++ , p[c] = !0), f = n + c, Object.prototype.hasOwnProperty.call(h, f)) n = f; else { if (Object.prototype.hasOwnProperty.call(p, n)) { if (n.charCodeAt(0) < 256) { for (o = 0; o < i; o++)d <<= 1, w == e - 1 ? (w = 0, y.push(t(d)), d = 0) : w++; for (s = n.charCodeAt(0), o = 0; o < 8; o++)d = d << 1 | 1 & s, w == e - 1 ? (w = 0, y.push(t(d)), d = 0) : w++ , s >>= 1 } else { for (s = 1, o = 0; o < i; o++)d = d << 1 | s, w == e - 1 ? (w = 0, y.push(t(d)), d = 0) : w++ , s = 0; for (s = n.charCodeAt(0), o = 0; o < 16; o++)d = d << 1 | 1 & s, w == e - 1 ? (w = 0, y.push(t(d)), d = 0) : w++ , s >>= 1 } 0 == --u && (u = Math.pow(2, i), i++), delete p[n] } else for (s = h[n], o = 0; o < i; o++)d = d << 1 | 1 & s, w == e - 1 ? (w = 0, y.push(t(d)), d = 0) : w++ , s >>= 1; 0 == --u && (u = Math.pow(2, i), i++), h[f] = l++ , n = String(c) } if ("" !== n) { if (Object.prototype.hasOwnProperty.call(p, n)) { if (n.charCodeAt(0) < 256) { for (o = 0; o < i; o++)d <<= 1, w == e - 1 ? (w = 0, y.push(t(d)), d = 0) : w++; for (s = n.charCodeAt(0), o = 0; o < 8; o++)d = d << 1 | 1 & s, w == e - 1 ? (w = 0, y.push(t(d)), d = 0) : w++ , s >>= 1 } else { for (s = 1, o = 0; o < i; o++)d = d << 1 | s, w == e - 1 ? (w = 0, y.push(t(d)), d = 0) : w++ , s = 0; for (s = n.charCodeAt(0), o = 0; o < 16; o++)d = d << 1 | 1 & s, w == e - 1 ? (w = 0, y.push(t(d)), d = 0) : w++ , s >>= 1 } 0 == --u && (u = Math.pow(2, i), i++), delete p[n] } else for (s = h[n], o = 0; o < i; o++)d = d << 1 | 1 & s, w == e - 1 ? (w = 0, y.push(t(d)), d = 0) : w++ , s >>= 1; 0 == --u && (u = Math.pow(2, i), i++) } for (s = 2, o = 0; o < i; o++)d = d << 1 | 1 & s, w == e - 1 ? (w = 0, y.push(t(d)), d = 0) : w++ , s >>= 1; for (; ;) { if (d <<= 1, w == e - 1) { y.push(t(d)); break } w++ } return y.join("") }, comp = r => { if (null == r) return ""; const e = com(r, 6, r => "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(r)); return `https://www.typescriptlang.org/play/#code/${e}${"====".slice(e.length % 4)}`; } // prettier-ignore

export const toPlayground = (code: string): string => comp(code);
